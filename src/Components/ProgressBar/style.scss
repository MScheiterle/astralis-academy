$elSet: 5;
$elCount: $elSet * 2;
$orange: #fe9000;
$orange-light: #ffb732;
$yellow: #ffdd4a;
$blue-light: #5adbff;
$blue: #3c6997;
$bounce: cubic-bezier(0, 0, 0, 1.97);
$smooth: cubic-bezier(0, 0.72, 0.58, 1);

.bar {
  display: flex;
  flex-direction: row-reverse;
  margin: auto;
  width: 300px;
  max-width: calc(100% - 30px);

  & .active {
    @for $n from 1 through $elCount {
      $r: $elCount - $n + 1;
      @if $r % 2 == 0 {
        &:nth-child(#{$r}) {
          &:after {
            transition-delay: 0.1s * ($n / 2 - 1);
          }
          .bar-button:before {
            transition-delay: 0.1s * ($n / 2 - 1) + 0.06s;
          }
        }
      }
      &:after {
        transform: scaleX(1);
      }
      .bar-button:before {
        transform: none;
        opacity: 1;
      }
    }
  }
  &-view {
    display: flex;
    flex-grow: 1;
    position: relative;

    &:after {
      height: 2px;
      top: calc(50% - 1px);
      transition: transform 0.06s $smooth;
      transform: scaleX(0);
      background: $orange-light;
      transform-origin: left;
      z-index: 1;
    }
    &:not(:last-child) {
      &:before,
      &:after {
        content: "";
        width: calc(100% - 24px);
        position: absolute;
        right: calc(50% + 12px);
      }
      &:before {
        height: 6px;
        top: calc(50% - 3px);
        background: $blue;
      }
      @for $n from 1 through $elCount {
        @if $n % 2 == 0 {
          &:nth-child(#{$n}) {
            &:after {
              transition-delay: 0.1s * ($n / 2 - 1);
            }
            .bar-button:before {
              transition-delay: 0.1s * ($n / 2 - 1) + 0.06s;
            }
          }
        }
      }
    }
  }
  &-button {
    display: block;
    width: 30px;
    height: 30px;
    margin: auto;
    border-radius: 50%;
    border: 3px solid $blue;
    position: relative;
    cursor: pointer;
    box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.3),
      2px 2px 8px rgba(0, 0, 0, 0.1);

    &:before,
    &:after {
      content: "";
      position: absolute;
      pointer-events: none;
    }
    &:before {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: radial-gradient(circle at center, $yellow, $orange);
      transform: scale(0.3);
      opacity: 0;
      transition: {
        property: transform, opacity;
        duration: 0.2s;
        timing-function: $smooth;
      }
    }
  }
}

.ProgressBar {
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: black
}

* {
  box-sizing: border-box;
  &:before,
  &:after {
    box-sizing: inherit;
  }
}
